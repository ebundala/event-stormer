{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "array",
    "title": "Aggrigates",
    "format": "tabs-top",
    "items": {
        "title": "Aggregate",
        "headerTemplate": "{{i}}-{{self.moduleName}}",
        "type": "object",
        "properties": {
            "moduleName": {
                "title": "Aggregate name",
                "type": "string"
            },
            "events": {
                "title": "Events",
                "type": "array", 
                "format": "tabs",               
                "items": {
                    "headerTemplate": "{{self.name}}",
                    "$ref": "#/definitions/event"
                }
            },
            "commands": {
                "title": "Commands",
                "type": "array",
                "format": "tabs",
                "items": {
                    "headerTemplate": "{{self.name}}",
                    "$ref": "#/definitions/command"
                }
            },
            "sagas": {
                "title": "Sagas",
                "type": "array",
                "format": "tabs",
                "items": {
                    "headerTemplate": "{{self.name}}",
                    "$ref": "#/definitions/saga"
                }
            },
            "queries": {
                "title": "Queries",
                "type": "array",
                "format": "tabs",
                "items": {
                    "headerTemplate": "{{self.name}}",
                    "$ref": "#/definitions/query"
                }
            }
        },
        "required": [
            "moduleName",
            "commands",
            "events",
            "sagas",
            "queries"
        ]
        
    },
    "definitions": {
        "saga": {
            "title": "Saga",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Saga name",
                    "type": "string"
                },
                "props": {
                    "title": "Saga props",
                    "type": "object",
                    "properties": {}
                },
                "dispatches": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/command",
                        "watch":{
                            "cmd":"commands"
                        }
                    }
                }
            },
            "required": [
                "name",
                "props",
                "dispatches"
            ]
        },
        "event": {
            "title": "Event",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Event name",
                    "type": "string"
                },
                "props": {
                    "title": "Event props",
                    "type": "object",
                    "properties": {}
                }
            },
            "required": [
                "name",
                "props"
            ]
        },
        "command": {
            "title": "Command",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Command Name",
                    "type": "string"
                },
                "version":{
                    "title": "Version",
                    "type":"string",
                    "enumSource": [{
                        "source": [
                          {
                            "value": 1,
                            "title": "One"
                          },
                          {
                            "value": 2,
                            "title": "Two"
                          }
                        ],
                        "title": "{{item.title}}",
                        "value": "{{item.value}}"
                      }]
                },
                "props": {
                    "title": "Props",
                    "type": "object",
                    "properties": {
                                                    
                        }
                    
                },
                "dispatches": {
                    "title": "Dispatch events",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/event"
                        
                    }
                }
            }
        },
        "query": {
            "title": "Query",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Query name",
                    "type": "string"
                },
                "props": {
                    "title": "Props",
                    "type": "object",
                    "properties": {}
                }
            },
            "required": [
                "name",
                "props"
            ]
        }
    }
}